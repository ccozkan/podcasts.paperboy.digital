<section class="section">
    <div class="container">
        <div class="columns">
            <div class="column is-one-fifth">
                <figure class="image is-128x128">
                    <img class="is-rounded" src="<%= @feed.pic_url %>">
                </figure>
            </div>
            <div class="column is-pulled-left">
                <h2 class="title is-2">
                    <%= @feed.name %>
                </h2>
                <p class="subtitle">
                    by
                    <%= @feed.provider %>
                </p>
            </div>
            <div class="column">
                <%= button_to "subscribe", { controller: :subscriptions, action: :create, external_id: @feed.external_id, name: @feed.name, pic_url: @feed.pic_url, rss_url: @feed.rss_url, provider: @feed.provider }, method: :post, type: 'submit', class: 'button is-primary', disabled: @already_subscribed&.include?(item[:external_id]) %>
            </div>
        </div>

        <div class="notification is-info">
            This is peeking mode. <strong>You can only listen 5 episodes in this mode.</strong> Subscribe to feed if you want to access all episodes.
        </div>

        <% if @items.present? %>
            <% @items.each do |item| %>
                <%= render partial: 'partials/episode', locals: { item: item, show_dismiss_button: false, show_image: false, show_short_date: false } %>
            <% end %>
        <% elsif @query %>
            No results found for title: <%= @query %>
            <br>
            <%= link_to 'clear', @feed %>
        <% else %>
            This feed does not have any episodesðŸ«¤
        <% end %>
        <div class="row">
            <%= render 'partials/page_navigation' %>
        </div>
    </div>
</section>
